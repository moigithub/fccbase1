'use strict';

angular.module('base0App')
  .controller('newpollVotesCtrl', function ($scope, $http, $location, Auth) {
    $scope.placeholders = ["Pepsi", "Coca-cola"];
    $scope.pollOptions=[];
    $scope.pollName="";
    
    $scope.getCurrentUser = Auth.getCurrentUser();
//console.log(JSON.stringify($scope.getCurrentUser));

    $scope.newOption= function(){
    	$scope.placeholders.push("new Poll");
    }

    $scope.submit = function(){
    	//console.log($scope.pollOptions);
    	//alert(JSON.stringify($scope.pollOptions));
    	$http.post('/api/votes', { "createdBy": $scope.getCurrentUser._id,
                                   "pollName": $scope.pollName,
                                   "pollOptions": $scope.pollOptions,
                                   "usersVote": [] });
      	$location.path('/votes/mypolls');
    }

    /*
var VotesSchema = new Schema({
    // _id: Number // autogenerated 
    createdBy:String,
    pollName: String,
    pollOptions: Array,
    usersVote: Array  // {uid:_id,pollName,""}
    //placeholders: Array
});
    */

  });
